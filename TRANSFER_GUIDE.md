# Automation Platform Transfer Guide

## Overview
This guide helps you transfer the complete automation platform code to your new project at automation.ahmedwesam.com.

## Files to Transfer

### 1. Core Application Files
Copy these files to your new project root:

**Package Configuration:**
- Create `package.json` with the required dependencies (see dependencies list below)
- `vite.config.ts` (from automation-app folder)
- `tailwind.config.ts` (from automation-app folder)
- `tsconfig.json`, `tsconfig.app.json`, `tsconfig.node.json`

**Main Application:**
- `src/main.tsx`
- `src/App.tsx`
- `src/index.css` (from automation-app folder)

### 2. Pages & Components
Copy all files from `automation-app/src/` to your new project `src/`:

**Pages:**
- `src/pages/Home.tsx`
- `src/pages/Workflows.tsx`
- `src/pages/WorkflowDetail.tsx`
- `src/pages/Auth.tsx`
- `src/pages/Dashboard.tsx`
- `src/pages/Collections.tsx`
- `src/pages/NotFound.tsx`

**Components:**
- `src/components/Navbar.tsx`
- `src/components/Footer.tsx`
- `src/components/N8nPreview.tsx`
- All UI components from `src/components/ui/`

**Contexts:**
- `src/contexts/AuthContext.tsx`

**Integrations:**
- `src/integrations/supabase/client.ts`
- `src/integrations/supabase/types.ts`

### 3. Supabase Database Setup

**Tables to create:**
```sql
-- Users and Authentication
CREATE TABLE public.user_profiles (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id uuid NOT NULL,
  email text,
  full_name text,
  avatar_url text,
  bio text,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now()
);

-- Workflows
CREATE TABLE public.workflows (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  slug text NOT NULL UNIQUE,
  name text NOT NULL,
  path text NOT NULL,
  raw_url text NOT NULL,
  size_bytes integer,
  updated_at timestamp with time zone,
  category text DEFAULT 'General',
  node_count integer DEFAULT 0,
  has_credentials boolean DEFAULT false,
  complexity text DEFAULT 'Easy',
  search_tsv tsvector,
  created_at timestamp with time zone DEFAULT now()
);

-- Tags
CREATE TABLE public.tags (
  id integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name text NOT NULL UNIQUE
);

-- Workflow Tags (Junction Table)
CREATE TABLE public.workflow_tags (
  workflow_id uuid NOT NULL,
  tag_id integer NOT NULL,
  PRIMARY KEY (workflow_id, tag_id)
);

-- User Collections
CREATE TABLE public.workflow_collections (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id uuid NOT NULL,
  name text NOT NULL,
  description text,
  is_public boolean DEFAULT false,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now()
);

-- Collection Items
CREATE TABLE public.workflow_collection_items (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  collection_id uuid NOT NULL,
  workflow_id uuid NOT NULL,
  added_at timestamp with time zone DEFAULT now()
);

-- User Favorites
CREATE TABLE public.workflow_favorites (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id uuid NOT NULL,
  workflow_id uuid NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  UNIQUE (user_id, workflow_id)
);

-- Download History
CREATE TABLE public.workflow_downloads (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id uuid NOT NULL,
  workflow_id uuid NOT NULL,
  downloaded_at timestamp with time zone DEFAULT now(),
  user_agent text,
  ip_address inet
);
```

**Enable RLS and create policies:**
```sql
-- Enable RLS on all tables
ALTER TABLE public.user_profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.workflows ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.workflow_collections ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.workflow_collection_items ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.workflow_favorites ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.workflow_downloads ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.tags ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.workflow_tags ENABLE ROW LEVEL SECURITY;

-- Policies for workflows (public read)
CREATE POLICY "public_read_workflows" ON public.workflows
  FOR SELECT USING (true);

-- Policies for user profiles
CREATE POLICY "Users can view their own profile" ON public.user_profiles
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can update their own profile" ON public.user_profiles
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own profile" ON public.user_profiles
  FOR INSERT WITH CHECK (auth.uid() = user_id);

-- Add other policies for collections, favorites, downloads...
```

### 4. Required Dependencies

Add these to your `package.json`:
```json
{
  "@supabase/supabase-js": "^2.56.0",
  "@tanstack/react-query": "^5.83.0",
  "@xyflow/react": "^12.8.4",
  "@types/dagre": "^0.7.53",
  "dagre": "^0.8.5",
  "react-router-dom": "^6.30.1",
  "lucide-react": "^0.462.0",
  "class-variance-authority": "^0.7.1",
  "clsx": "^2.1.1",
  "tailwind-merge": "^2.6.0",
  "tailwindcss-animate": "^1.0.7"
}
```

### 5. Environment Configuration

**Update Supabase client configuration:**
- Replace the Supabase URL and anon key in `src/integrations/supabase/client.ts`
- Make sure your new project's Supabase project ID and keys are correct

### 6. Deployment Steps

1. Copy all files to your new project
2. Install dependencies: `npm install`
3. Set up the Supabase database using the SQL above
4. Update the Supabase configuration with your new project's credentials
5. Test authentication and workflow functionality
6. Deploy to automation.ahmedwesam.com

### 7. Key Features Included

- **User Authentication:** Sign up, login, logout
- **Workflow Browser:** Search, filter, categorize workflows
- **User Dashboard:** Download history, favorites, collections
- **Workflow Preview:** Visual n8n workflow preview with React Flow
- **Protected Downloads:** Authentication-gated workflow downloads
- **Collections:** User-created workflow collections
- **Responsive Design:** Mobile-friendly interface

## Next Steps

1. Create your new project structure
2. Copy the files as outlined above
3. Set up the Supabase database
4. Test all functionality
5. Deploy to automation.ahmedwesam.com

The platform will be a complete, professional automation hub with user accounts and all workflow management features.